{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Desktop/TimeCapsule/lib/supabase/middleware.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { NextResponse, type NextRequest } from \"next/server\"\n\nexport async function updateSession(request: NextRequest) {\n  let supabaseResponse = NextResponse.next({\n    request,\n  })\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll()\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value }) => request.cookies.set(name, value))\n          supabaseResponse = NextResponse.next({\n            request,\n          })\n          cookiesToSet.forEach(({ name, value, options }) => supabaseResponse.cookies.set(name, value, options))\n        },\n      },\n    },\n  )\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  // Protected routes\n  if (request.nextUrl.pathname.startsWith(\"/dashboard\") && !user) {\n    const url = request.nextUrl.clone()\n    url.pathname = \"/auth/login\"\n    return NextResponse.redirect(url)\n  }\n\n  // Admin routes\n  if (request.nextUrl.pathname.startsWith(\"/admin\") && !user) {\n    const url = request.nextUrl.clone()\n    url.pathname = \"/auth/login\"\n    return NextResponse.redirect(url)\n  }\n\n  // Redirect logged-in users away from auth pages\n  if (\n    (request.nextUrl.pathname.startsWith(\"/auth/login\") || request.nextUrl.pathname.startsWith(\"/auth/sign-up\")) &&\n    user\n  ) {\n    const url = request.nextUrl.clone()\n    url.pathname = \"/dashboard\"\n    return NextResponse.redirect(url)\n  }\n\n  return supabaseResponse\n}\n"],"names":["createServerClient","NextResponse","updateSession","request","supabaseResponse","next","supabase","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","cookies","getAll","setAll","cookiesToSet","forEach","name","value","set","options","data","user","auth","getUser","nextUrl","pathname","startsWith","url","clone","redirect"],"mappings":";;;;;AAAA,OAASA,kBAAkB,KAAQ,eAAe;;AAClD,OAASC,YAAY,KAA0B,aAAa,CAE5D,MAAO;;;AAAA,cAAe,CAAAC,aAAaA,CAACC,OAAoB,CAAE;IACxD,GAAI,CAAAC,gBAAgB,GAAGH,0NAAY,CAACI,IAAI,CAAC;QACvCF;IACF,CAAC,CAAC;IAEF,KAAM,CAAAG,QAAQ,OAAGN,iOAAkB,CACjCO,OAAO,CAACC,GAAG,CAACC,wBAAwB,CACpCF,OAAO,CAACC,GAAG,CAACE,6BAA6B,uPACzC;QACEC,OAAO,EAAE;YACPC,MAAMA,CAAA,CAAG;gBACP,MAAO,CAAAT,OAAO,CAACQ,OAAO,CAACC,MAAM,CAAC,CAAC;YACjC,CAAC;YACDC,MAAMA,EAACC,YAAY,CAAE;gBACnBA,YAAY,CAACC,OAAO,CAAC,CAAC,EAAEC,IAAI,EAAEC,KAAM,EAAC,GAAKd,OAAO,CAACQ,OAAO,CAACO,GAAG,CAACF,IAAI,EAAEC,KAAK,CAAC,CAAC;gBAC3Eb,gBAAgB,GAAGH,0NAAY,CAACI,IAAI,CAAC;oBACnCF;gBACF,CAAC,CAAC;gBACFW,YAAY,CAACC,OAAO,CAAC,CAAC,EAAEC,IAAI,EAAEC,KAAK,EAAEE,OAAQ,EAAC,GAAKf,gBAAgB,CAACO,OAAO,CAACO,GAAG,CAACF,IAAI,EAAEC,KAAK,EAAEE,OAAO,CAAC,CAAC;YACxG;QACF;IACF,CACF,CAAC;IAED,MAAM,EACJC,IAAI,EAAE,EAAEC,IAAK,EACf,EAAC,GAAG,KAAM,CAAAf,QAAQ,CAACgB,IAAI,CAACC,OAAO,CAAC,CAAC;IAGjC,IAAIpB,OAAO,CAACqB,OAAO,CAACC,QAAQ,CAACC,UAAU,CAAC,YAAY,CAAC,IAAI,CAACL,IAAI,EAAE;QAC9D,KAAM,CAAAM,GAAG,GAAGxB,OAAO,CAACqB,OAAO,CAACI,KAAK,CAAC,CAAC;QACnCD,GAAG,CAACF,QAAQ,GAAG,aAAa;QAC5B,MAAO,CAAAxB,0NAAY,CAAC4B,QAAQ,CAACF,GAAG,CAAC;IACnC;IAGA,IAAIxB,OAAO,CAACqB,OAAO,CAACC,QAAQ,CAACC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAACL,IAAI,EAAE;QAC1D,KAAM,CAAAM,GAAG,GAAGxB,OAAO,CAACqB,OAAO,CAACI,KAAK,CAAC,CAAC;QACnCD,GAAG,CAACF,QAAQ,GAAG,aAAa;QAC5B,MAAO,CAAAxB,0NAAY,CAAC4B,QAAQ,CAACF,GAAG,CAAC;IACnC;IAGA,IACE,CAACxB,OAAO,CAACqB,OAAO,CAACC,QAAQ,CAACC,UAAU,CAAC,aAAa,CAAC,IAAIvB,OAAO,CAACqB,OAAO,CAACC,QAAQ,CAACC,UAAU,CAAC,eAAe,CAAC,KAC3GL,IAAI,EACJ;QACA,KAAM,CAAAM,GAAG,GAAGxB,OAAO,CAACqB,OAAO,CAACI,KAAK,CAAC,CAAC;QACnCD,GAAG,CAACF,QAAQ,GAAG,YAAY;QAC3B,MAAO,CAAAxB,0NAAY,CAAC4B,QAAQ,CAACF,GAAG,CAAC;IACnC;IAEA,MAAO,CAAAvB,gBAAgB;AACzB","ignoreList":[]}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Desktop/TimeCapsule/middleware.ts"],"sourcesContent":["import { updateSession } from \"@/lib/supabase/middleware\"\nimport type { NextRequest } from \"next/server\"\n\nexport async function middleware(request: NextRequest) {\n  return await updateSession(request)\n}\n\nexport const config = {\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\"],\n}\n"],"names":["updateSession","middleware","request","config","matcher"],"mappings":";;;;;;AAAA,OAASA,aAAa,KAAQ,2BAA2B,CAGzD,MAAO;;AAAA,cAAe,CAAAC,UAAUA,CAACC,OAAoB,CAAE;IACrD,MAAO,CAAA,KAAM,KAAAF,gLAAa,EAACE,OAAO,CAAC;AACrC,CAEA,MAAO;AAAA,KAAM,CAAAC,MAAM,GAAG;IACpBC,OAAO,EAAE;QAAC,mFAAmF;;AAC/F,CAAC","ignoreList":[]}}]
}